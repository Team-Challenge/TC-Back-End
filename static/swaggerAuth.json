{
  "openapi": "3.0.0",
  "info": {
    "title": "Auth API Documentation",
    "description": "API for user registration, sign in, email verification, and user information update.",
    "version": "1.0.2"
  },
  "schemes": ["http", "https"],
  "paths": {
    "/accounts/signup": {
      "post": {
        "summary": "User Registration",
        "tags": ["Accounts"],
        "requestBody": {
          "description": "User registration data",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignupUserSchema"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful registration",
            "content": {
              "application/json": {
                "example": {
                  "user": {
                    "id": 1,
                    "email": "user@example.com",
                    "full_name": "John Doe"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request"
          }
        }
      }
    },
    "/accounts/signin": {
      "post": {
        "summary": "User Sign-In",
        "tags": ["Accounts"],
        "requestBody": {
          "description": "User sign-in data",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SigninUserSchema"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful sign-in",
            "content": {
              "application/json": {
                "example": {
                  "access_token": "your_access_token",
                  "refresh_token": "your_refresh_token"
                }
              }
            }
          }
        }
      }
    },
    "/accounts/verify/{token}": {
      "get": {
        "summary": "Verify Email",
        "tags": ["Accounts"],
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Email verified",
            "content": {
              "application/json": {
                "example": {
                  "message": "OK"
                }
              }
            }
          },
          "404": {
            "description": "Invalid verification token"
          }
        }
      }
    },
    "/accounts/check_jwt_token": {
      "get": {
        "summary": "Check JWT Token",
        "tags": ["Accounts"],
        "responses": {
          "200": {
            "description": "Token is valid",
            "content": {
              "application/json": {
                "example": {
                  "message": "OK"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/accounts/refresh": {
      "post": {
        "summary": "Refresh Access Token",
        "tags": ["Accounts"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "New access token generated",
            "content": {
              "application/json": {
                "example": {
                  "access_token": "new_access_token"
                }
              }
            }
          }
        }
      }
    },
    "/accounts/logout": {
      "delete": {
        "summary": "User Logout",
        "tags": ["Accounts"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Token successfully revoked",
            "content": {
              "application/json": {
                "example": {
                  "msg": "Access token successfully revoked"
                }
              }
            }
          }
        }
      }
    },
    "/accounts/update_user": {
      "post": {
        "summary": "Update User Information",
        "tags": ["Accounts"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "description": "User update data",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdateSchema"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User information updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "message": "User information updated successfully"
                }
              }
            }
          },
          "404": {
            "description": "User not found"
          },
          "400": {
            "description": "Invalid request data"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "SignupUserSchema": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "full_name": {
            "type": "string",
            "minLength": 2,
            "maxLength": 50
          },
          "password": {
            "type": "string",
            "minLength": 8
          }
        },
        "required": ["email", "full_name", "password"]
      },
      "SigninUserSchema": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string"
          }
        },
        "required": ["email", "password"]
      },
      "UserUpdateSchema": {
        "type": "object",
        "properties": {
          "full_name": {
            "type": "string",
            "minLength": 2,
            "maxLength": 50
          },
          "phone_number": {
            "type": "string"
          }
        },
        "required": ["full_name", "phone_number"]
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "full_name": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "joined_at": {
            "type": "string",
            "format": "date-time"
          },
          "is_active": {
            "type": "boolean"
          },
          "phone_number": {
            "type": "string"
          }
        }
      }
    },
    "securitySchemes": {
      "BearerAuth": {
        "type": "apiKey",
        "name": "Authorization",
        "in": "header",
        "description": "Bearer token"
      }
    }
  }
}

